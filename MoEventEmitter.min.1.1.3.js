/**
 * MoEventEmitter v1.0.01
 * Unlicense - http://unlicense.org/
 * 画笔(上海)网络科技有限公司
 * 基于 EventEmitter (Github: https://github.com/Olical/EventEmitter) 
 * EventEmitter 由 Oliver Caldwell - http://oli.me.uk/ 开发
 * @preserve
 */
!function(e){"use strict";function t(){}function n(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function r(e){return function(){return this[e].apply(this,arguments)}}function i(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&i(e.listener)}var o=e.MoEventEmitter;t.prototype.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},t.prototype.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},t.prototype.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},t.prototype.addListener=function(e,t){if(!i(t))throw new TypeError("listener must be a function");var r,o=this.getListenersAsObject(e),s="object"==typeof t;for(r in o)o.hasOwnProperty(r)&&n(o[r],t)===-1&&o[r].push(s?t:{listener:t,once:!1});return this},t.prototype.on=r("addListener"),t.prototype.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},t.prototype.once=r("addOnceListener"),t.prototype.defineEvent=function(e){return this.getListeners(e),this},t.prototype.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},t.prototype.removeListener=function(e,t){var r,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&(r=n(o[i],t),r!==-1&&o[i].splice(r,1));return this},t.prototype.off=r("removeListener"),t.prototype.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},t.prototype.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},t.prototype.manipulateListeners=function(e,t,n){var r,i,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)o.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?o.call(this,r,i):s.call(this,r,i));return this},t.prototype.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},t.prototype.removeAllListeners=r("removeEvent"),t.prototype.emitEvent=function(e,t){var n,r,i,o,s,p=this.getListenersAsObject(e);for(o in p)if(p.hasOwnProperty(o))for(n=p[o].slice(0),i=0;i<n.length;i++)r=n[i],r.once===!0&&this.removeListener(e,r.listener),s=r.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},t.prototype.trigger=r("emitEvent"),t.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},t.prototype.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},t.prototype._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},t.prototype._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return e.MoEventEmitter=o,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:e.MoEventEmitter=t}(this||{});